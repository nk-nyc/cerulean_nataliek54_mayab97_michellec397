<!DOCTYPE html>
<!--
    Natalie Keiger (PM), Michelle Chen, Maya Berchin
    Task Calendar By cerulean
    SoftDev
    p02 ChoreRulean
    Jan 2026
-->
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Bootstrap -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

 <title>{{ user }}'s Profile</title>
</head>

<body style="background-color: black;">

 <!-- Navbar -->
 <div class="navbar">
	 <div class='nav'>
		 <a href='/'> ChoreRulean </a>
	 </div>
	 <div class="nav">
		 <a href='/'> Home </a>
	 </div>
	 <div class="nav">
		 <a href="/profile"> Profile </a>
	 </div>
	 <div class="nav">
		 <a href="/calendar"> Calendar </a>
	 </div>
	 <div class="nav">
		 <a href="/logout"> Log Out </a>
	 </div>
 </div>
 <div>

		<!--display name-->
		<div class="container py-4" style="max-width: 700px;">

	    <div class="text-center mb-6">
	      <h1 class="fw-semibold mb-2">{{ user }}</h1>
			<!--display pfp-->
			<img src="{{ pfp_dict[pfp] }}" alt="{{ pfp }}" width="160" height="160">
</div>
			<br>
			<div class="border rounded p-5 bg-white mb-4">
		 <h4 class="fw-semibold mb-3">Settings</h4>
		</center>
		<!--change pfp (dropdown)-->
		<form action="/profile" method="POST" class="mb-3">
			 <label class="form-label">Profile picture</label>
			 <div class="d-flex gap-2">
				 <select class="form-select" name="pfp">
					 {% for item in pfp_dict %}
						 {% if item == pfp %}
							 <option value="{{ item }}" selected>{{ item }}</option>
						 {% else %}
							 <option value="{{ item }}">{{ item }}</option>
						 {% endif %}
					 {% endfor %}
				 </select>
				 <button class="btn btn-outline-primary" type="submit" name="pfp_form">Update</button>
			 </div>
		 </form>
		<br>
		<!--change password-->
		<form action="/profile" method="POST" class="mb-3">
	<label class="form-label">Change password</label>
	<input type="password" class="form-control mb-2" placeholder="Old password" name="old_pass">
	<input type="password" class="form-control mb-2" placeholder="New password" name="new_pass">
	<button class="btn btn-outline-primary" type="submit" name="password_form">Change</button>
</form>
		<br>
		<!--change invite perms (dropdown)-->
		Change who can invite you to join tasks:
		<form action="/profile" method="POST">
	         <label class="form-label">Who can invite you to tasks</label>
	         <div class="">
	           <select class="form-select" name="invite">
	             {% for item in invite_options %}
	               {% if item == perms %}
	                 <option value="{{ item }}" selected>{{ item }}</option>
	               {% else %}
	                 <option value="{{ item }}">{{ item }}</option>
	               {% endif %}
	             {% endfor %}
	           </select>
	           <button class="btn btn-outline-primary" type="submit" name="invite_form">Update</button>
	         </div>
	       </form>
	     </div>
		<br>
		<br>
		<!--display friends-->
		<div class="border rounded p-5 bg-white mb-4">
	<h4 class="fw-semibold mb-2">Friends</h4>
	<div class="text">
		{% for friend in fr_list %}
			<div>{{ friend }}</div>
		{% endfor %}
	</div>
</div>
		<!--display pending requests-->
		<div class="border rounded p-5 bg-white mb-4">
		<h4 class="fw-semibold mb-2">Pending requests</h4>

		{% for user in fr_reqs %}
			<form action="/profile" method="POST">
				<div class="me-auto">{{ user }}</div>
				<button class="btn btn-sm btn-outline-success" type="submit" name="accept {{ user }}">Accept</button>
				<button class="btn btn-sm btn-outline-danger" type="submit" name="decline {{ user }}">Decline</button>
			</form>
		{% endfor %}
	</div>

    <!-- Send request -->
    <div class="border rounded p-5 bg-white mb-3">
      <h4 class="fw-semibold">Send friend request</h4>
      <form action="/profile" method="POST">
        <input type="text" class="form-control" name="fr_user" placeholder="Username">
        <button class="btn btn-primary" type="submit" name="fr_form">Send</button>
      </form>
    </div>

		<br>
		<!--display a message (error, success msg) if there was one provided-->
		{{ msg }}

	</body>
</html>
